{"ast":null,"code":"var _jsxFileName = \"/Users/carloscarrasquillo/Documents/Documents/code/hackathon/swamphacks_2020/website/client/src/components/Render/Render.js\";\nimport React, { Component } from 'react';\nimport * as THREE from 'three';\nimport Dropzone from 'react-dropzone';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport { STLLoader } from 'three/examples/jsm/loaders/STLLoader';\nimport RubberDuck from './../../assets/cad-rubber-duck.stl';\n\nclass Render extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.onDrop = files => {\n      var file = files[0];\n      this.renderFile(file);\n    };\n  }\n\n  renderFile(file) {\n    document.getElementById('infoAndInstruc').style.visibility = 'hidden';\n    this.setState({\n      fileRendered: true\n    });\n    this.openFile(file);\n    this.setState({\n      currentFile: file\n    });\n  }\n\n  componentWillUnmount() {\n    this.mesh = null;\n    this.renderer = null;\n    this.scene = null;\n    this.camera = null;\n    this.controls = null;\n  }\n\n  componentDidMount() {\n    var mesh, renderer, scene, camera, controls, bb, rect;\n    var rotate = 'Z';\n    var vector = new THREE.Vector3(-1, 0, 0);\n    var pause = false;\n\n    this.openFile = file => {\n      init();\n      load();\n    };\n\n    function load() {\n      var loader = new STLLoader();\n      loader.load(RubberDuck, function (geometry) {\n        geometry.center();\n        var material = new THREE.MeshNormalMaterial();\n        mesh = new THREE.Mesh(geometry, material);\n        var boundingBox = new THREE.Box3().setFromObject(mesh);\n        var sizeHouse = bb.getSize();\n        var sizeObject = boundingBox.getSize();\n        var ratio = sizeObject.divide(sizeHouse);\n        var maxRatio = Math.max(ratio.x, ratio.y, ratio.z);\n        var invertRatio = 1 / maxRatio;\n        mesh.scale.set(invertRatio, invertRatio, invertRatio);\n        mesh.position.set(0, 0.25, 0);\n        mesh.setRotationFromAxisAngle(vector, Math.PI / 2);\n        scene.add(mesh);\n        animate();\n      });\n    }\n\n    function init() {\n      var container = document.getElementById(\"container\");\n      renderer.setSize(rect.width - 2, rect.height - 2);\n      container.appendChild(renderer.domElement);\n      scene = new THREE.Scene();\n      scene.background = new THREE.Color(0xF8F9FA);\n      camera = new THREE.PerspectiveCamera(1, rect.width / rect.height, 1, 1000);\n      controls = new OrbitControls(camera, container);\n      var boxGeometry = new THREE.BoxGeometry(1, 1, 1);\n      var boxMaterial = new THREE.MeshNormalMaterial();\n      var boxMesh = new THREE.Mesh(boxGeometry, boxMaterial);\n      bb = new THREE.Box3().setFromObject(boxMesh);\n      var height = bb.getSize().y;\n      var dist = height / 2 / Math.tan(Math.PI * 1 / 360);\n      camera.position.set(dist + 25, dist + 25, dist + 25);\n      camera.lookAt(boxMesh.position);\n      window.addEventListener('resize', onWindowResize, false);\n      document.getElementById(\"container\").addEventListener('mousedown', mousedownfunc, false);\n      document.getElementById(\"container\").addEventListener('mouseup', mouseupfunc, false);\n    }\n\n    function mousedownfunc() {\n      pause = true;\n    }\n\n    function mouseupfunc() {\n      pause = false;\n    }\n\n    function onWindowResize() {\n      camera.aspect = rect.width / rect.height;\n      camera.updateProjectionMatrix();\n      renderer.setSize(rect.width - 2, rect.height - 2);\n    }\n\n    function animate() {\n      if (!pause) {\n        if (rotate === 'X') {\n          mesh.rotation.x += 0.01;\n        } else if (rotate === 'Y') {\n          mesh.rotation.y += 0.01;\n        } else if (rotate === 'Z') {\n          mesh.rotation.z += 0.01;\n        }\n      }\n\n      requestAnimationFrame(animate);\n      renderer.render(scene, camera);\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(Dropzone, {\n      onDrop: this.onDrop,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, ({\n      getRootProps,\n      getInputProps,\n      isDragActive\n    }) => React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", Object.assign({\n      id: \"infoAndInstruc\",\n      style: {\n        position: \"absolute\",\n        marginRight: \"70px\",\n        borderStyle: \"solid\",\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: \"700px\",\n        width: \"700px\",\n        backgroundColor: \"#F8F9FA\"\n      }\n    }, getRootProps(), {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(\"input\", Object.assign({}, getInputProps(), {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    })))))));\n  }\n\n}\n\nexport default Render;","map":{"version":3,"sources":["/Users/carloscarrasquillo/Documents/Documents/code/hackathon/swamphacks_2020/website/client/src/components/Render/Render.js"],"names":["React","Component","THREE","Dropzone","OrbitControls","STLLoader","RubberDuck","Render","onDrop","files","file","renderFile","document","getElementById","style","visibility","setState","fileRendered","openFile","currentFile","componentWillUnmount","mesh","renderer","scene","camera","controls","componentDidMount","bb","rect","rotate","vector","Vector3","pause","init","load","loader","geometry","center","material","MeshNormalMaterial","Mesh","boundingBox","Box3","setFromObject","sizeHouse","getSize","sizeObject","ratio","divide","maxRatio","Math","max","x","y","z","invertRatio","scale","set","position","setRotationFromAxisAngle","PI","add","animate","container","setSize","width","height","appendChild","domElement","Scene","background","Color","PerspectiveCamera","boxGeometry","BoxGeometry","boxMaterial","boxMesh","dist","tan","lookAt","window","addEventListener","onWindowResize","mousedownfunc","mouseupfunc","aspect","updateProjectionMatrix","rotation","requestAnimationFrame","render","getRootProps","getInputProps","isDragActive","marginRight","borderStyle","display","justifyContent","alignItems","backgroundColor"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport * as THREE from 'three';\nimport Dropzone from 'react-dropzone'\nimport {OrbitControls} from 'three/examples/jsm/controls/OrbitControls';\nimport {STLLoader} from 'three/examples/jsm/loaders/STLLoader';\nimport RubberDuck from './../../assets/cad-rubber-duck.stl';\n\nclass Render extends Component {\n\n\n    renderFile(file) {\n          document.getElementById('infoAndInstruc').style.visibility = 'hidden';\n          this.setState({ fileRendered: true });\n          this.openFile(file);\n          this.setState({ currentFile: file });\n    }\n\n    onDrop = (files) => {\n        var file = files[0];\n        this.renderFile(file);\n    }\n\n    componentWillUnmount() {\n        this.mesh = null;\n        this.renderer = null;\n        this.scene = null;\n        this.camera = null;\n        this.controls = null;\n    }\n\n    componentDidMount() {\n        var mesh, renderer, scene, camera, controls, bb, rect;\n        var rotate = 'Z';\n        var vector = new THREE.Vector3(-1, 0, 0);\n        var pause = false;\n\n        this.openFile = (file) => {\n            init();\n            load();\n        }\n\n        function load() {\n            var loader = new STLLoader();\n            loader.load(RubberDuck, function (geometry) {\n                geometry.center();\n                var material = new THREE.MeshNormalMaterial();\n                mesh = new THREE.Mesh(geometry, material);\n                var boundingBox = new THREE.Box3().setFromObject(mesh);\n                var sizeHouse = bb.getSize();\n                var sizeObject = boundingBox.getSize();\n                var ratio = sizeObject.divide(sizeHouse);\n                var maxRatio = Math.max(ratio.x, ratio.y, ratio.z);\n                var invertRatio = 1 / maxRatio;\n                mesh.scale.set(invertRatio, invertRatio, invertRatio);\n                mesh.position.set(0, 0.25, 0);\n                mesh.setRotationFromAxisAngle(vector, Math.PI/2);\n                scene.add(mesh);\n                animate();\n            });\n\n        }\n\n        function init() {\n            var container = document.getElementById(\"container\");\n\n\n\n            renderer.setSize(rect.width - 2, rect.height - 2);\n\n            container.appendChild(renderer.domElement);\n\n            scene = new THREE.Scene();\n            scene.background = new THREE.Color(0xF8F9FA);\n            camera = new THREE.PerspectiveCamera(1, rect.width / rect.height, 1, 1000);\n            controls = new OrbitControls(camera, container);\n\n            var boxGeometry = new THREE.BoxGeometry(1, 1, 1);\n            var boxMaterial = new THREE.MeshNormalMaterial();\n            var boxMesh = new THREE.Mesh(boxGeometry, boxMaterial);\n            bb = new THREE.Box3().setFromObject(boxMesh);\n            var height = bb.getSize().y;\n            var dist = height / 2 / Math.tan(Math.PI * 1 / 360);\n            camera.position.set(dist + 25, dist + 25, dist + 25);\n            camera.lookAt(boxMesh.position);\n\n            window.addEventListener('resize', onWindowResize, false);\n            document.getElementById(\"container\").addEventListener('mousedown', mousedownfunc, false);\n            document.getElementById(\"container\").addEventListener('mouseup', mouseupfunc, false);\n        }\n\n        function mousedownfunc() {\n            pause = true;\n        }\n\n        function mouseupfunc() {\n            pause = false;\n        }\n\n        function onWindowResize() {\n            camera.aspect = (rect.width) / (rect.height);\n            camera.updateProjectionMatrix();\n            renderer.setSize(rect.width - 2, rect.height - 2);\n        }\n\n        function animate() {\n            if (!pause) {\n                if (rotate === 'X') {\n                    mesh.rotation.x += 0.01;\n                }\n                else if (rotate === 'Y') {\n                    mesh.rotation.y += 0.01;\n                }\n                else if (rotate === 'Z') {\n                    mesh.rotation.z += 0.01;\n                }\n            }\n            requestAnimationFrame(animate);\n            renderer.render(scene, camera);\n        }\n    }\n\n    render() {\n        return (\n            <div>\n                    <div>\n                        <Dropzone onDrop={this.onDrop}>{({ getRootProps, getInputProps, isDragActive }) => (\n                            <div>\n                                <div id=\"infoAndInstruc\" style={{ position: \"absolute\", marginRight: \"70px\", borderStyle: \"solid\", display: 'flex', justifyContent: 'center', alignItems: 'center', height: \"700px\", width: \"700px\", backgroundColor: \"#F8F9FA\" }} {...getRootProps()}>\n                                    <input {...getInputProps()} />\n                                </div>\n\n                            </div>\n                        )}\n                        </Dropzone>\n                    </div>\n            </div>\n        );\n    }\n}\n\nexport default Render;\n"]},"metadata":{},"sourceType":"module"}