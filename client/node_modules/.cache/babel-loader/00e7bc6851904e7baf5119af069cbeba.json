{"ast":null,"code":"var _jsxFileName = \"/Users/carloscarrasquillo/Documents/Documents/code/hackathon/swamphacks_2020/website/client/src/components/Render/Render.js\";\nimport React, { Component } from 'react';\nimport * as THREE from 'three';\nimport Dropzone from 'react-dropzone';\nimport Button from 'react-bootstrap/Button';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport ReactTooltip from 'react-tooltip';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport { STLLoader } from 'three/examples/jsm/loaders/STLLoader';\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader';\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader';\nimport { TDSLoader } from 'three/examples/jsm/loaders/TDSLoader';\nimport { Redirect } from 'react-router-dom';\n\nvar axios = require('axios'); //Variables that are sent to Price.server.controller\n\n\nvar materialzID = \"\";\nvar finishID = \"\";\nvar city = \"Gainesville\";\nvar zipcode = \"32601\";\nvar currency = \"USD\";\nvar finishes = [];\nvar uploadedFile;\nvar url; //Variables needed for parsing, searching, different things like that\n\nvar supportedFileExtensions = [\"stl\", \"obj\", \"fbx\", \"3ds\"];\nvar materialObjects = [];\nvar finishesObjects = [];\nvar finishNames = ['please choose a material'];\nvar materialz = \"Polyamide (SLS)\";\nvar countryCodes = [\"US\"];\nvar stateCodes = [\"AL\", \"AK\", \"AZ\", \"AR\", \"CA\", \"CO\", \"CT\", \"DE\", \"FL\", \"GA\", \"HI\", \"ID\", \"IL\", \"IN\", \"IA\", \"KS\", \"KY\", \"LA\", \"ME\", \"MD\", \"MA\", \"MI\", \"MN\", \"MS\", \"MO\", \"MT\", \"NE\", \"NV\", \"NH\", \"NJ\", \"NM\", \"NY\", \"NC\", \"ND\", \"OH\", \"OR\", \"PA\", \"RI\", \"SC\", \"SD\", \"TN\", \"TX\", \"UT\", \"VT\", \"VA\", \"WA\", \"WV\", \"WI\", \"WY\"];\n\nfunction isMaterial(materialPassedIn) {\n  return materialPassedIn.name === materialz;\n}\n\nclass ThreeScene extends Component {\n  constructor(props) {\n    super(props);\n\n    this.routeChange = () => {\n      this.setState({\n        link: '/payment'\n      });\n    };\n\n    this.onDrop = files => {\n      var file = files[0];\n      this.renderFile(file);\n    };\n\n    this.onOrientation = eventKey => {\n      this.updateOrientation(eventKey);\n      var text = document.getElementById('but-orientate');\n      text.textContent = eventKey;\n    };\n\n    this.onFinish = eventKey => {\n      var text = document.getElementById('but-finish');\n      text.textContent = eventKey;\n    };\n\n    this.onRotation = eventKey => {\n      this.updateRotation(eventKey);\n      var text = document.getElementById('but-rotate');\n      text.textContent = eventKey;\n    };\n\n    this.getMats = () => {\n      axios.get(\"/api/mat\").then(mat => {\n        var matNames = [];\n        mat.data.forEach(function (element) {\n          materialObjects.push(element);\n          matNames.push(element.name);\n        });\n        this.setState({\n          materialsList: matNames\n        });\n        this.setState({\n          mats: mat.data\n        });\n      });\n    };\n\n    this.onChangeFileUpload = event => {\n      uploadedFile = event.target.files[0];\n    };\n\n    this.state = {\n      currentFile: null,\n      link: null,\n      fileRendered: false,\n      //Two lists needed for drop down menus\n      materialsList: [''],\n      finishList: [\"Natural white\", \"Polished natural white\", \"Dyed yellow\", \"Satin Yellow\", \"Polished and Dyed Yellow\", \"Dyed orange\", \"Satin Orange\", \"Polished and Dyed Orange\", \"Dyed red\", \"Satin Red\", \"Polished and Dyed Red\", \"Satin Green\", \"Polished and Dyed Green\", \"Dyed blue\", \"Satin Blue\", \"Polished and Dyed Blue\", \"Dyed purple\", \"Satin Purple\", \"Polished and Dyed Purple\", \"Dyed black\", \"Satin black\", \"Polished and Dyed Black\", \"Dyed bordeaux\", \"Satin Bordeaux\", \"Polished and Dyed Bordeaux\", \"Dyed petrol blue\", \"Satin Petrol Blue\", \"Polished and Dyed Petrol blue\", \"Dyed brown\", \"Satin Brown\", \"Polished and Dyed Brown\", \"Velvet yellow\", \"Velvet ochre\", \"Velvet pink\", \"Velvet bordeaux\", \"Velvet green\", \"Velvet petrol blue\", \"Velvet blue\", \"Velvet black\", \"Spray painted white\", \"Spray painted black\", \"Waterproof white\", \"Dyed green\", \"Dyed grey\"],\n      mats: [],\n      price: '0.00',\n      scale: '',\n      //Needed to send to Price.server.controller\n      coutryCode: 'US',\n      stateCode: 'FL',\n      modelID: '',\n      finishState: true,\n      cartState: true,\n      error: '',\n      token: '',\n      buttonDisabledState: true\n    };\n    this.handleChangeMaterial = this.handleChangeMaterial.bind(this);\n    this.handleChangeFinish = this.handleChangeFinish.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.onChangeFileUpload = this.onChangeFileUpload.bind(this);\n    this.handleChangeScale = this.handleChangeScale.bind(this);\n    this.getMats();\n    this.handleChangeNext = this.handleChangeNext.bind(this);\n  }\n\n  getFile() {\n    var file = this.refs.fileUploader.files[0];\n    this.renderFile(file);\n  }\n\n  handleClick() {\n    this.refs.fileUploader.click();\n    document.getElementById(\"renderInstruc\").textContent = 'Click me or drag a file to upload!';\n  }\n\n  checkExtensionValidity(file) {\n    var fileExtension = file.name.substring(file.name.lastIndexOf('.') + 1, file.name.length) || file.name;\n    if (supportedFileExtensions.includes(fileExtension.toLowerCase())) return true;else return false;\n  }\n\n  renderFile(file) {\n    if (file) {\n      if (this.checkExtensionValidity(file)) {\n        document.getElementById('infoAndInstruc').style.visibility = 'hidden';\n        this.setState({\n          fileRendered: true\n        });\n        this.openFile(file);\n        var text = document.getElementById('but-upload');\n        text.textContent = file.name;\n        this.setState({\n          currentFile: file\n        });\n      } else {\n        this.setState({\n          fileRendered: false\n        });\n        document.getElementById('infoAndInstruc').style.visibility = 'visible';\n        document.getElementById(\"renderInstruc\").textContent = \"File not accepted. Try again.\";\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.mesh = null;\n    this.renderer = null;\n    this.scene = null;\n    this.camera = null;\n    this.controls = null;\n  }\n\n  componentDidMount() {\n    var mesh, renderer, scene, camera, controls, bb, rect, uploadedFile, selectedMaterial;\n    var rotate = 'Z';\n    var vector = new THREE.Vector3(-1, 0, 0);\n    var pause = false;\n\n    this.openFile = file => {\n      uploadedFile = file;\n\n      if (!mesh) {\n        init();\n        load(file, true);\n      } else {\n        update();\n        load(file, false);\n      }\n    };\n\n    this.updateOrientation = type => {\n      if (uploadedFile) {\n        if (type === 'XYZ') {\n          vector = new THREE.Vector3(-1, 0, 0);\n        } else if (type === 'XZY') {\n          vector = new THREE.Vector3(0, 0, 1);\n        } else if (type === 'YXZ') {\n          vector = new THREE.Vector3(1, 0, 0);\n        } else if (type === 'YZX') {\n          vector = new THREE.Vector3(0, 1, 0);\n        } else if (type === 'ZXY') {\n          vector = new THREE.Vector3(0, 0, -1);\n        } else if (type === 'ZYX') {\n          vector = new THREE.Vector3(0, -1, 0);\n        }\n\n        update();\n        load(uploadedFile, false);\n      }\n    };\n\n    this.updateRotation = eventKey => {\n      if (uploadedFile) {\n        rotate = eventKey;\n        update();\n        load(uploadedFile, false);\n      }\n    };\n\n    this.updateMaterial = (material, finish) => {\n      if (uploadedFile) {\n        update();\n        load(uploadedFile, false);\n        material = material.replace(/\\s/g, '-');\n        finish = finish.replace(/\\s/g, '-');\n        var materialPath = '/materials/' + material.toLowerCase() + '/' + finish.toLowerCase() + '.png';\n        console.log(materialPath);\n        const vs = `\n                varying vec3 e;\n                varying vec3 n;\n\n                void main() {\n\n                e = normalize( vec3( modelViewMatrix * vec4( position, 1.0 ) ) );\n                n = normalize( normalMatrix * normal );\n\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1. );\n\n                }\n                `;\n        const fs = `\n                uniform sampler2D tMatCap;\n\n                varying vec3 e;\n                varying vec3 n;\n\n                void main() {\n\n                vec3 r = reflect( e, n );\n                float m = 2. * sqrt( pow( r.x, 2. ) + pow( r.y, 2. ) + pow( r.z + 1., 2. ) );\n                vec2 vN = r.xy / m + .5;\n\n                vec3 base = texture2D( tMatCap, vN ).rgb;\n\n                gl_FragColor = vec4( base, 1. );\n\n                }\n                `;\n        selectedMaterial = new THREE.ShaderMaterial({\n          uniforms: {\n            tMatCap: {\n              type: 't',\n              value: THREE.ImageUtils.loadTexture(process.env.PUBLIC_URL + materialPath)\n            }\n          },\n          vertexShader: vs,\n          fragmentShader: fs,\n          flatShading: THREE.SmoothShading\n        });\n        selectedMaterial.uniforms.tMatCap.value.wrapS = selectedMaterial.uniforms.tMatCap.value.wrapT = THREE.ClampToEdgeWrapping;\n      }\n    };\n\n    function update() {\n      scene.remove(mesh);\n      mesh.geometry.dispose();\n      mesh.material.dispose();\n    }\n\n    function load(file, doAnimate) {\n      const tempURL = URL.createObjectURL(file);\n      var str = file.name.split('.').pop();\n      var ext = str.toLowerCase();\n      var loader;\n\n      if (ext === 'stl') {\n        loader = new STLLoader();\n        loader.load(tempURL, function (geometry) {\n          geometry.center();\n          make(geometry, doAnimate);\n        });\n      } else if (ext === 'obj') {\n        loader = new OBJLoader();\n        loader.load(tempURL, function (object) {\n          var g = new THREE.Geometry().fromBufferGeometry(object.children[\"0\"].geometry);\n          g.center();\n          make(g, doAnimate);\n        });\n      } else if (ext === 'fbx') {\n        loader = new FBXLoader();\n        loader.load(tempURL, function (object) {\n          var g = new THREE.Geometry().fromBufferGeometry(object.children[\"0\"].geometry);\n          g.center();\n          make(g, doAnimate);\n        });\n      } else if (ext === '3ds') {\n        loader = new TDSLoader();\n        loader.load(tempURL, function (object) {\n          var g = new THREE.Geometry().fromBufferGeometry(object.children[\"0\"].geometry);\n          g.center();\n          make(g, doAnimate);\n        });\n      }\n\n      URL.revokeObjectURL(tempURL);\n    }\n\n    function make(geometry, doAnimate) {\n      var material;\n\n      if (selectedMaterial) {\n        material = selectedMaterial;\n      } else {\n        material = new THREE.MeshNormalMaterial();\n      }\n\n      mesh = new THREE.Mesh(geometry, material);\n      var boundingBox = new THREE.Box3().setFromObject(mesh);\n      var sizeHouse = bb.getSize();\n      var sizeObject = boundingBox.getSize();\n      var ratio = sizeObject.divide(sizeHouse);\n      var maxRatio = Math.max(ratio.x, ratio.y, ratio.z);\n      var invertRatio = 1 / maxRatio;\n      mesh.scale.set(invertRatio, invertRatio, invertRatio);\n      mesh.position.set(0, 0.25, 0);\n      mesh.setRotationFromAxisAngle(vector, Math.PI / 2);\n      scene.add(mesh);\n\n      if (doAnimate) {\n        animate();\n      }\n    }\n\n    function init() {\n      var container = document.getElementById(\"container\");\n      rect = container.getBoundingClientRect();\n      renderer = new THREE.WebGLRenderer({\n        antialias: true\n      });\n      renderer.setSize(rect.width - 2, rect.height - 2);\n      container.appendChild(renderer.domElement);\n      scene = new THREE.Scene();\n      scene.background = new THREE.Color(0xF8F9FA);\n      camera = new THREE.PerspectiveCamera(1, rect.width / rect.height, 1, 1000);\n      controls = new OrbitControls(camera, container);\n      var axes = new THREE.AxesHelper(1);\n      axes.position.set(0, -0.25, 0);\n      scene.add(axes);\n      var gridHelper = new THREE.GridHelper(1, 5);\n      gridHelper.position.set(0, -0.25, 0);\n      scene.add(gridHelper);\n      var boxGeometry = new THREE.BoxGeometry(1, 1, 1);\n      var boxMaterial = new THREE.MeshNormalMaterial();\n      var boxMesh = new THREE.Mesh(boxGeometry, boxMaterial);\n      bb = new THREE.Box3().setFromObject(boxMesh);\n      var height = bb.getSize().y;\n      var dist = height / 2 / Math.tan(Math.PI * 1 / 360);\n      camera.position.set(dist + 25, dist + 25, dist + 25);\n      camera.lookAt(boxMesh.position);\n      camera.updateProjectionMatrix();\n      window.addEventListener('resize', onWindowResize, false);\n      document.getElementById(\"container\").addEventListener('mousedown', mousedownfunc, false);\n      document.getElementById(\"container\").addEventListener('mouseup', mouseupfunc, false);\n    }\n\n    function mousedownfunc() {\n      pause = true;\n    }\n\n    function mouseupfunc() {\n      pause = false;\n    }\n\n    function onWindowResize() {\n      camera.aspect = rect.width / rect.height;\n      camera.updateProjectionMatrix();\n      renderer.setSize(rect.width - 2, rect.height - 2);\n    }\n\n    function animate() {\n      if (!pause) {\n        if (rotate === 'X') {\n          mesh.rotation.x += 0.01;\n        } else if (rotate === 'Y') {\n          mesh.rotation.y += 0.01;\n        } else if (rotate === 'Z') {\n          mesh.rotation.z += 0.01;\n        }\n      }\n\n      requestAnimationFrame(animate);\n      renderer.render(scene, camera);\n    }\n  }\n\n  getSupportedFileString() {\n    return supportedFileExtensions.join(\", \");\n  } //<-------------------------------------------------------------------------Copied from Material.js Component------------------------------------------------------------------------->\n  //Gets the materials and finishes from the API\n\n\n  handleChangeNext(value) {\n    console.log('Sending'); //Maybe need to send?\n    //countryCode: this.state.countryCode, stateCode: this.state.stateCode, city: city, zipcode: zipcode, currency: currency\n  } //Changes the finishes based on the material chosen\n\n\n  handleChangeMaterial(eventKey) {\n    var string = eventKey.toString();\n    var array = string.split(',');\n    var index = array[0];\n    var name = array[1];\n    var text = document.getElementById('but-material');\n    text.textContent = name;\n    this.setState({\n      finishState: false\n    });\n    materialzID = materialObjects[index].materialID;\n    finishesObjects = materialObjects[index].finishes;\n    finishNames = [];\n    materialz = name;\n    var materialChosen = this.state.mats.find(isMaterial);\n    console.log(materialChosen);\n    materialChosen.finishes.forEach(function (element) {\n      finishes.push(element);\n      finishNames.push(element.name);\n    });\n    this.setState({\n      finishList: finishNames,\n      finish: this.state.finishList[0]\n    });\n    finishID = finishes[0].finishID;\n    this.updateMaterial(name, finishNames[0]);\n    document.getElementById('but-material').style.borderColor = \"#949494\";\n    document.getElementById('but-finish').style.borderColor = \"#949494\";\n  }\n\n  checkFinish() {\n    if (this.state.finishState) {\n      return \"Select\";\n    } else {\n      return this.state.finishList[0];\n    }\n  }\n\n  handleChangeFinish(eventKey) {\n    var string = eventKey.toString();\n    var array = string.split(',');\n    var index = array[0];\n    var name = array[1];\n    var text = document.getElementById('but-finish');\n    text.textContent = name;\n    finishID = finishes[index].finishID;\n    this.setState({\n      finish: name\n    });\n    this.updateMaterial(materialz, name);\n    document.getElementById('but-finish').style.borderColor = \"#949494\";\n  }\n\n  handleSubmit(event) {\n    if (materialzID && finishID && this.state.scale) {\n      var text = document.getElementById('priceText');\n      text.textContent = \"Calculating\";\n      document.getElementById('wave').style.display = '';\n      this.setState({\n        cartState: false\n      });\n      this.setState({\n        error: ' '\n      });\n      event.preventDefault();\n      const reactData = {\n        material: materialzID,\n        finish: finishID,\n        countryCode: this.state.countryCode,\n        stateCode: this.state.stateCode,\n        city: city,\n        zipcode: zipcode,\n        currency: currency,\n        scale: this.state.scale,\n        url: url\n      }; //Send the information to Price.server.controller\n\n      axios.post(\"/api/sendMat\", reactData).then(price => //Get the price back from Price.server.controller\n      {\n        console.log(price);\n        this.setState({\n          price: price.data.modelPrice\n        });\n        this.setState({\n          token: price.data.token\n        });\n\n        if (this.state.price == '0') {\n          this.setState({\n            error: \"The dimensions of the model are too large or too small.\"\n          });\n          text.textContent = \"Error\";\n          document.getElementById('wave').style.display = 'none';\n        } else {\n          this.setState({\n            buttonDisabledState: false\n          });\n          text.textContent = \"Add to Cart for: $\" + price.data.modelPrice;\n          document.getElementById('wave').style.display = 'none';\n        }\n      }).catch(err => {\n        text.textContent = \"Error: Please Refresh the Page!\";\n        document.getElementById('wave').style.display = 'none';\n        console.log('error', err);\n      });\n    } else {\n      if (!materialzID) {\n        document.getElementById('but-material').style.borderColor = \"#e32c2b\";\n      }\n\n      if (!finishID) {\n        document.getElementById('but-finish').style.borderColor = \"#e32c2b\";\n      }\n\n      if (!this.state.scale) {\n        document.getElementById('but-scale').style.borderColor = \"#e32c2b\";\n      }\n    }\n  }\n\n  handleChangeScale(eventKey) {\n    this.state.scale = eventKey / 100;\n    var text = document.getElementById('but-scale');\n    text.textContent = eventKey + '%';\n    document.getElementById('but-scale').style.borderColor = \"#949494\";\n  }\n\n  render() {\n    const {\n      link\n    } = this.state;\n\n    if (link) {\n      const {\n        currentFile\n      } = this.state;\n\n      if (currentFile) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 550\n          },\n          __self: this\n        }, React.createElement(Redirect, {\n          to: {\n            pathname: link,\n            state: {\n              modelPrice: this.state.price,\n              token: this.state.token\n            }\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 551\n          },\n          __self: this\n        }));\n      } else {\n        this.setState({\n          link: null\n        });\n      }\n    }\n\n    const handleSubmit = event => {\n      const form = event.currentTarget;\n\n      if (form.checkValidity() === false) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    };\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 569\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"ui-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 570\n      },\n      __self: this\n    }, \" Upload 3D CAD Files\"), React.createElement(\"div\", {\n      className: \"renderBody\",\n      style: {\n        marginTop: \"35px\",\n        display: \"flex\",\n        justifyContent: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 571\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 572\n      },\n      __self: this\n    }, React.createElement(Dropzone, {\n      onDrop: this.onDrop,\n      noClick: this.state.fileRendered,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 573\n      },\n      __self: this\n    }, ({\n      getRootProps,\n      getInputProps,\n      isDragActive\n    }) => React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 574\n      },\n      __self: this\n    }, React.createElement(\"div\", Object.assign({\n      id: \"infoAndInstruc\",\n      style: {\n        position: \"absolute\",\n        marginRight: \"70px\",\n        borderStyle: \"solid\",\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: \"700px\",\n        width: \"700px\",\n        backgroundColor: \"#F8F9FA\"\n      }\n    }, getRootProps(), {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 575\n      },\n      __self: this\n    }), React.createElement(\"input\", Object.assign({}, getInputProps(), {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 576\n      },\n      __self: this\n    })), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 577\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 578\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 579\n      },\n      __self: this\n    }, \" \", React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 579\n      },\n      __self: this\n    }, React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 579\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: \"upload.png\",\n      alt: \"Drop Icon\",\n      width: \"100\",\n      height: \"100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 579\n      },\n      __self: this\n    }))), \" \")), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 581\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"renderInstruc\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 582\n      },\n      __self: this\n    }, isDragActive ? \"Drop it like it's hot!\" : 'Click me or drag a file to upload!')))), React.createElement(\"div\", Object.assign({\n      id: \"container\",\n      style: {\n        postion: \"absolute\",\n        marginRight: \"70px\",\n        borderStyle: \"solid\",\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: \"700px\",\n        width: \"700px\",\n        backgroundColor: \"#F8F9FA\"\n      }\n    }, getRootProps(), {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 587\n      },\n      __self: this\n    }), React.createElement(\"input\", Object.assign({}, getInputProps(), {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 588\n      },\n      __self: this\n    })))))), React.createElement(\"div\", {\n      style: {\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: \"700px\",\n        width: \"500px\",\n        backgroundColor: \"#FFFFFF\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 595\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 596\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"ui-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 597\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      \"data-tip\": true,\n      \"data-for\": \"upload\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 597\n      },\n      __self: this\n    }, \" Upload \")), React.createElement(\"div\", {\n      id: \"ui-dropdown\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 598\n      },\n      __self: this\n    }, React.createElement(ReactTooltip, {\n      id: \"upload\",\n      type: \"warning\",\n      effect: \"solid\",\n      place: 'right',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 599\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 600\n      },\n      __self: this\n    }, \"supported files are \", this.getSupportedFileString())), React.createElement(\"input\", {\n      type: \"file\",\n      ref: \"fileUploader\",\n      onChange: this.getFile.bind(this),\n      style: {\n        display: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 602\n      },\n      __self: this\n    }), React.createElement(Button, {\n      id: \"but-upload\",\n      type: \"file\",\n      onClick: this.handleClick.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 603\n      },\n      __self: this\n    }, \"Upload a file (\", this.getSupportedFileString(), \")\"), React.createElement(\"div\", {\n      id: \"ui-error-statement\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 606\n      },\n      __self: this\n    }, \" \", this.state.error, \" \")), React.createElement(ButtonGroup, {\n      id: \"ui-dropdown\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 609\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      style: {\n        zIndex: 3\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 610\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 611\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"ui-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 612\n      },\n      __self: this\n    }, \"Orientation\")), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 614\n      },\n      __self: this\n    }, React.createElement(DropdownButton, {\n      id: \"but-orientate\",\n      title: \"Select\",\n      onSelect: this.onOrientation,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 615\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        width: \"167px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 616\n      },\n      __self: this\n    }, React.createElement(Dropdown.Item, {\n      eventKey: \"XYZ\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 617\n      },\n      __self: this\n    }, \"XYZ\"), React.createElement(Dropdown.Item, {\n      eventKey: \"XZY\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 618\n      },\n      __self: this\n    }, \"XZY\"), React.createElement(Dropdown.Item, {\n      eventKey: \"YXZ\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 619\n      },\n      __self: this\n    }, \"YXZ\"), React.createElement(Dropdown.Item, {\n      eventKey: \"YZX\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 620\n      },\n      __self: this\n    }, \"YZX\"), React.createElement(Dropdown.Item, {\n      eventKey: \"ZXY\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 621\n      },\n      __self: this\n    }, \"ZXY\"), React.createElement(Dropdown.Item, {\n      eventKey: \"ZYX\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 622\n      },\n      __self: this\n    }, \"ZYX\"))))), React.createElement(\"ul\", {\n      style: {\n        zIndex: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 628\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 629\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"ui-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 630\n      },\n      __self: this\n    }, \"Rotation\")), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 632\n      },\n      __self: this\n    }, React.createElement(DropdownButton, {\n      id: \"but-rotate\",\n      title: \"Select\",\n      onSelect: this.onRotation,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 633\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        width: \"166px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 634\n      },\n      __self: this\n    }, React.createElement(Dropdown.Item, {\n      eventKey: \"X\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 635\n      },\n      __self: this\n    }, \"X\"), React.createElement(Dropdown.Item, {\n      eventKey: \"Y\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 636\n      },\n      __self: this\n    }, \"Y\"), React.createElement(Dropdown.Item, {\n      eventKey: \"Z\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 637\n      },\n      __self: this\n    }, \"Z\"))))), React.createElement(\"ul\", {\n      style: {\n        zIndex: 2\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 643\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 644\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"ui-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 645\n      },\n      __self: this\n    }, \"Scale\")), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 647\n      },\n      __self: this\n    }, React.createElement(DropdownButton, {\n      id: \"but-scale\",\n      title: \"Select\",\n      onSelect: this.handleChangeScale,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 648\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        width: \"167px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 649\n      },\n      __self: this\n    }, React.createElement(Dropdown.Item, {\n      eventKey: \"20\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 650\n      },\n      __self: this\n    }, \"20%\"), React.createElement(Dropdown.Item, {\n      eventKey: \"50\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 651\n      },\n      __self: this\n    }, \"50%\"), React.createElement(Dropdown.Item, {\n      eventKey: \"70\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 652\n      },\n      __self: this\n    }, \"70%\"), React.createElement(Dropdown.Item, {\n      eventKey: \"100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 653\n      },\n      __self: this\n    }, \"100%\")))))), React.createElement(\"div\", {\n      id: \"ui-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 660\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      \"data-tip\": true,\n      \"data-for\": \"drop-mat\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 660\n      },\n      __self: this\n    }, \"Material*\"), React.createElement(ReactTooltip, {\n      id: \"drop-mat\",\n      type: \"warning\",\n      effect: \"solid\",\n      place: 'right',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 661\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 662\n      },\n      __self: this\n    }, \"The renders are approximations of actual material finishes.\"))), React.createElement(DropdownButton, {\n      id: \"but-material\",\n      title: \"Select\",\n      onSelect: this.handleChangeMaterial,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 665\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"scroll\",\n      style: {\n        width: \"500px\",\n        overflowY: \"scroll\",\n        maxHeight: \"315px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 666\n      },\n      __self: this\n    }, this.state.materialsList.map((x, y) => React.createElement(Dropdown.Item, {\n      style: {\n        textTransform: \"capitalize\"\n      },\n      eventKey: [y, x],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 667\n      },\n      __self: this\n    }, x)))), React.createElement(\"div\", {\n      id: \"ui-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 671\n      },\n      __self: this\n    }, \"Finish\"), React.createElement(DropdownButton, {\n      disabled: this.state.finishState,\n      id: \"but-finish\",\n      title: this.checkFinish(),\n      onSelect: this.handleChangeFinish,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 672\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"scroll\",\n      style: {\n        width: \"500px\",\n        overflowY: \"scroll\",\n        maxHeight: \"315px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 673\n      },\n      __self: this\n    }, this.state.finishList.map((x, y) => React.createElement(Dropdown.Item, {\n      style: {\n        textTransform: \"capitalize\"\n      },\n      eventKey: [y, x],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 674\n      },\n      __self: this\n    }, x)))), React.createElement(ButtonGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 678\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 679\n      },\n      __self: this\n    }, React.createElement(Button, {\n      id: \"ui-submit\",\n      type: \"submit\",\n      onClick: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 680\n      },\n      __self: this\n    }, \" Get Quote \")), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 683\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.routeChange,\n      disabled: this.state.buttonDisabledState,\n      id: \"ui-price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 684\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      style: {\n        display: 'flex',\n        justifyContent: \"center\",\n        alignItems: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 685\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      id: \"priceText\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 686\n      },\n      __self: this\n    }, \"Add to Cart for: $\", this.state.price), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 689\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"wave\",\n      style: {\n        display: \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 690\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 691\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 692\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 693\n      },\n      __self: this\n    })))))))))), React.createElement(\"div\", {\n      id: \"ui-footnote\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 704\n      },\n      __self: this\n    }, \"*The renders are approximations of actual material finishes.\"));\n  }\n\n}\n\nexport default ThreeScene;","map":{"version":3,"sources":["/Users/carloscarrasquillo/Documents/Documents/code/hackathon/swamphacks_2020/website/client/src/components/Render/Render.js"],"names":["React","Component","THREE","Dropzone","Button","DropdownButton","Dropdown","ButtonGroup","ReactTooltip","OrbitControls","STLLoader","OBJLoader","FBXLoader","TDSLoader","Redirect","axios","require","materialzID","finishID","city","zipcode","currency","finishes","uploadedFile","url","supportedFileExtensions","materialObjects","finishesObjects","finishNames","materialz","countryCodes","stateCodes","isMaterial","materialPassedIn","name","ThreeScene","constructor","props","routeChange","setState","link","onDrop","files","file","renderFile","onOrientation","eventKey","updateOrientation","text","document","getElementById","textContent","onFinish","onRotation","updateRotation","getMats","get","then","mat","matNames","data","forEach","element","push","materialsList","mats","onChangeFileUpload","event","target","state","currentFile","fileRendered","finishList","price","scale","coutryCode","stateCode","modelID","finishState","cartState","error","token","buttonDisabledState","handleChangeMaterial","bind","handleChangeFinish","handleSubmit","handleChangeScale","handleChangeNext","getFile","refs","fileUploader","handleClick","click","checkExtensionValidity","fileExtension","substring","lastIndexOf","length","includes","toLowerCase","style","visibility","openFile","componentWillUnmount","mesh","renderer","scene","camera","controls","componentDidMount","bb","rect","selectedMaterial","rotate","vector","Vector3","pause","init","load","update","type","updateMaterial","material","finish","replace","materialPath","console","log","vs","fs","ShaderMaterial","uniforms","tMatCap","value","ImageUtils","loadTexture","process","env","PUBLIC_URL","vertexShader","fragmentShader","flatShading","SmoothShading","wrapS","wrapT","ClampToEdgeWrapping","remove","geometry","dispose","doAnimate","tempURL","URL","createObjectURL","str","split","pop","ext","loader","center","make","object","g","Geometry","fromBufferGeometry","children","revokeObjectURL","MeshNormalMaterial","Mesh","boundingBox","Box3","setFromObject","sizeHouse","getSize","sizeObject","ratio","divide","maxRatio","Math","max","x","y","z","invertRatio","set","position","setRotationFromAxisAngle","PI","add","animate","container","getBoundingClientRect","WebGLRenderer","antialias","setSize","width","height","appendChild","domElement","Scene","background","Color","PerspectiveCamera","axes","AxesHelper","gridHelper","GridHelper","boxGeometry","BoxGeometry","boxMaterial","boxMesh","dist","tan","lookAt","updateProjectionMatrix","window","addEventListener","onWindowResize","mousedownfunc","mouseupfunc","aspect","rotation","requestAnimationFrame","render","getSupportedFileString","join","string","toString","array","index","materialID","materialChosen","find","borderColor","checkFinish","display","preventDefault","reactData","countryCode","post","modelPrice","catch","err","pathname","form","currentTarget","checkValidity","stopPropagation","marginTop","justifyContent","getRootProps","getInputProps","isDragActive","marginRight","borderStyle","alignItems","backgroundColor","postion","zIndex","overflowY","maxHeight","map","textTransform"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport * as THREE from 'three';\nimport Dropzone from 'react-dropzone'\nimport Button from 'react-bootstrap/Button';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport ReactTooltip from 'react-tooltip';\nimport {OrbitControls} from 'three/examples/jsm/controls/OrbitControls';\nimport {STLLoader} from 'three/examples/jsm/loaders/STLLoader';\nimport {OBJLoader} from 'three/examples/jsm/loaders/OBJLoader';\nimport {FBXLoader} from 'three/examples/jsm/loaders/FBXLoader';\nimport {TDSLoader} from 'three/examples/jsm/loaders/TDSLoader';\nimport {Redirect} from 'react-router-dom';\nvar axios = require('axios');\n\n//Variables that are sent to Price.server.controller\nvar materialzID = \"\";\nvar finishID = \"\";\nvar city = \"Gainesville\"\nvar zipcode = \"32601\"\nvar currency = \"USD\";\nvar finishes = [];\nvar uploadedFile;\nvar url;\n\n//Variables needed for parsing, searching, different things like that\nvar supportedFileExtensions = [\"stl\", \"obj\", \"fbx\", \"3ds\"]\nvar materialObjects = [];\nvar finishesObjects = [];\nvar finishNames = ['please choose a material'];\nvar materialz = \"Polyamide (SLS)\";\nvar countryCodes = [\"US\"];\nvar stateCodes = [\"AL\", \"AK\", \"AZ\", \"AR\", \"CA\", \"CO\", \"CT\", \"DE\", \"FL\", \"GA\", \"HI\", \"ID\", \"IL\", \"IN\", \"IA\", \"KS\", \"KY\", \"LA\", \"ME\", \"MD\", \"MA\", \"MI\", \"MN\", \"MS\", \"MO\", \"MT\", \"NE\", \"NV\", \"NH\", \"NJ\", \"NM\", \"NY\", \"NC\", \"ND\", \"OH\", \"OR\", \"PA\", \"RI\", \"SC\", \"SD\", \"TN\", \"TX\", \"UT\", \"VT\", \"VA\", \"WA\", \"WV\", \"WI\", \"WY\"]\n\nfunction isMaterial(materialPassedIn) {\n    return materialPassedIn.name === materialz;\n}\n\nclass ThreeScene extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            currentFile: null,\n            link: null,\n            fileRendered: false,\n\n            //Two lists needed for drop down menus\n            materialsList: [''],\n            finishList: [\"Natural white\",\"Polished natural white\",\"Dyed yellow\",\"Satin Yellow\",\"Polished and Dyed Yellow\",\"Dyed orange\",\"Satin Orange\",\"Polished and Dyed Orange\",\"Dyed red\",\"Satin Red\",\"Polished and Dyed Red\",\"Satin Green\",\"Polished and Dyed Green\",\"Dyed blue\",\"Satin Blue\",\"Polished and Dyed Blue\",\"Dyed purple\",\"Satin Purple\",\"Polished and Dyed Purple\",\"Dyed black\",\"Satin black\",\"Polished and Dyed Black\",\"Dyed bordeaux\",\"Satin Bordeaux\",\"Polished and Dyed Bordeaux\",\"Dyed petrol blue\",\"Satin Petrol Blue\",\"Polished and Dyed Petrol blue\",\"Dyed brown\",\"Satin Brown\",\"Polished and Dyed Brown\",\"Velvet yellow\",\"Velvet ochre\",\"Velvet pink\",\"Velvet bordeaux\",\"Velvet green\",\"Velvet petrol blue\",\"Velvet blue\",\"Velvet black\",\"Spray painted white\",\"Spray painted black\",\"Waterproof white\",\"Dyed green\",\"Dyed grey\"],\n            mats: [],\n            price: '0.00',\n            scale: '',\n            //Needed to send to Price.server.controller\n            coutryCode: 'US',\n            stateCode: 'FL',\n            modelID: '',\n            finishState: true,\n            cartState: true,\n            error: '',\n            token: '',\n            buttonDisabledState: true\n        };\n\n        this.handleChangeMaterial = this.handleChangeMaterial.bind(this);\n        this.handleChangeFinish = this.handleChangeFinish.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.onChangeFileUpload = this.onChangeFileUpload.bind(this)\n        this.handleChangeScale = this.handleChangeScale.bind(this)\n        this.getMats()\n        this.handleChangeNext = this.handleChangeNext.bind(this)\n    }\n\n    routeChange = () => {\n        this.setState({link: '/payment'});\n    }\n\n    getFile() {\n        var file = this.refs.fileUploader.files[0];\n        this.renderFile(file);\n    }\n\n    handleClick() {\n        this.refs.fileUploader.click();\n        document.getElementById(\"renderInstruc\").textContent = 'Click me or drag a file to upload!';\n    }\n\n    checkExtensionValidity(file) {\n      var fileExtension = file.name.substring(file.name.lastIndexOf('.')+1, file.name.length) || file.name;\n\n      if (supportedFileExtensions.includes(fileExtension.toLowerCase())) return true;\n      else return false;\n    }\n\n    renderFile(file) {\n        if (file) {\n            if (this.checkExtensionValidity(file)) {\n                document.getElementById('infoAndInstruc').style.visibility = 'hidden';\n                this.setState({ fileRendered: true });\n                this.openFile(file);\n                var text = document.getElementById('but-upload');\n                text.textContent = file.name;\n                this.setState({ currentFile: file });\n\n            }\n            else {\n                this.setState({ fileRendered: false });\n                document.getElementById('infoAndInstruc').style.visibility = 'visible';\n                document.getElementById(\"renderInstruc\").textContent = \"File not accepted. Try again.\";\n            }\n        }\n    }\n\n    onDrop = (files) => {\n        var file = files[0];\n        this.renderFile(file);\n    }\n\n    onOrientation = (eventKey) => {\n        this.updateOrientation(eventKey);\n        var text = document.getElementById('but-orientate');\n        text.textContent = eventKey;\n    }\n\n    onFinish = (eventKey) => {\n        var text = document.getElementById('but-finish');\n        text.textContent = eventKey;\n    }\n\n    onRotation = (eventKey) => {\n        this.updateRotation(eventKey);\n        var text = document.getElementById('but-rotate');\n        text.textContent = eventKey;\n    }\n\n    componentWillUnmount() {\n        this.mesh = null;\n        this.renderer = null;\n        this.scene = null;\n        this.camera = null;\n        this.controls = null;\n    }\n\n    componentDidMount() {\n        var mesh, renderer, scene, camera, controls, bb, rect, uploadedFile, selectedMaterial;\n        var rotate = 'Z';\n        var vector = new THREE.Vector3(-1, 0, 0);\n        var pause = false;\n\n        this.openFile = (file) => {\n            uploadedFile = file;\n            if (!mesh) {\n                init();\n                load(file, true);\n            }\n            else {\n                update();\n                load(file, false);\n            }\n        }\n\n        this.updateOrientation = (type) => {\n            if (uploadedFile) {\n                if (type === 'XYZ') {\n                    vector = new THREE.Vector3(-1, 0, 0);\n                }\n                else if (type === 'XZY') {\n                    vector = new THREE.Vector3(0, 0, 1);\n                }\n                else if (type === 'YXZ') {\n                    vector = new THREE.Vector3(1, 0, 0);\n                }\n                else if (type === 'YZX') {\n                    vector = new THREE.Vector3(0, 1, 0);\n                }\n                else if (type === 'ZXY') {\n                    vector = new THREE.Vector3(0, 0, -1);\n                }\n                else if (type === 'ZYX') {\n                    vector = new THREE.Vector3(0, -1, 0);\n                }\n                update();\n                load(uploadedFile, false);\n            }\n        }\n\n        this.updateRotation = (eventKey) => {\n            if (uploadedFile) {\n                rotate = eventKey;\n                update();\n                load(uploadedFile, false);\n            }\n        }\n\n        this.updateMaterial = (material, finish) => {\n            if (uploadedFile) {\n                update();\n                load(uploadedFile, false);\n\n                material = material.replace(/\\s/g, '-');\n                finish = finish.replace(/\\s/g, '-');\n                var materialPath = '/materials/' + material.toLowerCase() + '/' + finish.toLowerCase() + '.png';\n                console.log(materialPath);\n\n                const vs = `\n                varying vec3 e;\n                varying vec3 n;\n\n                void main() {\n\n                e = normalize( vec3( modelViewMatrix * vec4( position, 1.0 ) ) );\n                n = normalize( normalMatrix * normal );\n\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1. );\n\n                }\n                `;\n\n                const fs = `\n                uniform sampler2D tMatCap;\n\n                varying vec3 e;\n                varying vec3 n;\n\n                void main() {\n\n                vec3 r = reflect( e, n );\n                float m = 2. * sqrt( pow( r.x, 2. ) + pow( r.y, 2. ) + pow( r.z + 1., 2. ) );\n                vec2 vN = r.xy / m + .5;\n\n                vec3 base = texture2D( tMatCap, vN ).rgb;\n\n                gl_FragColor = vec4( base, 1. );\n\n                }\n                `;\n\n                selectedMaterial = new THREE.ShaderMaterial({\n                uniforms: {\n                    tMatCap: {\n                    type: 't',\n                    value: THREE.ImageUtils.loadTexture(process.env.PUBLIC_URL + materialPath)\n                    },\n                },\n                vertexShader: vs,\n                fragmentShader: fs,\n                flatShading: THREE.SmoothShading\n                });\n                selectedMaterial.uniforms.tMatCap.value.wrapS = selectedMaterial.uniforms.tMatCap.value.wrapT = THREE.ClampToEdgeWrapping;\n            }\n        }\n\n        function update() {\n            scene.remove(mesh);\n            mesh.geometry.dispose();\n            mesh.material.dispose();\n        }\n\n        function load(file, doAnimate) {\n            const tempURL = URL.createObjectURL(file);\n\n            var str = file.name.split('.').pop();\n            var ext = str.toLowerCase();\n            var loader;\n\n            if (ext === 'stl') {\n                loader = new STLLoader();\n                loader.load(tempURL, function (geometry) {\n                    geometry.center();\n                    make(geometry, doAnimate);\n                });\n            }\n            else if (ext === 'obj') {\n                loader = new OBJLoader();\n                loader.load(tempURL, function (object) {\n                    var g = new THREE.Geometry().fromBufferGeometry(object.children[\"0\"].geometry);\n                    g.center();\n                    make(g, doAnimate);\n                });\n            }\n            else if (ext === 'fbx') {\n                loader = new FBXLoader();\n                loader.load(tempURL, function(object) {\n                    var g = new THREE.Geometry().fromBufferGeometry(object.children[\"0\"].geometry);\n                    g.center();\n                    make(g, doAnimate);\n                });\n            }\n            else if (ext === '3ds') {\n                loader = new TDSLoader();\n                loader.load(tempURL, function(object) {\n                    var g = new THREE.Geometry().fromBufferGeometry(object.children[\"0\"].geometry);\n                    g.center();\n                    make(g, doAnimate);\n                });\n            }\n\n            URL.revokeObjectURL(tempURL);\n        }\n\n        function make(geometry, doAnimate) {\n            var material;\n            if (selectedMaterial) {\n                material = selectedMaterial;\n            }\n            else {\n                material = new THREE.MeshNormalMaterial();\n            }\n            mesh = new THREE.Mesh(geometry, material);\n            var boundingBox = new THREE.Box3().setFromObject(mesh);\n            var sizeHouse = bb.getSize();\n            var sizeObject = boundingBox.getSize();\n            var ratio = sizeObject.divide(sizeHouse);\n            var maxRatio = Math.max(ratio.x, ratio.y, ratio.z);\n            var invertRatio = 1 / maxRatio;\n            mesh.scale.set(invertRatio, invertRatio, invertRatio);\n            mesh.position.set(0, 0.25, 0);\n            mesh.setRotationFromAxisAngle(vector, Math.PI/2);\n            scene.add(mesh);\n            if (doAnimate) {\n                animate();\n            }\n        }\n\n        function init() {\n            var container = document.getElementById(\"container\");\n            rect = container.getBoundingClientRect();\n\n            renderer = new THREE.WebGLRenderer({ antialias: true });\n            renderer.setSize(rect.width - 2, rect.height - 2);\n\n            container.appendChild(renderer.domElement);\n\n            scene = new THREE.Scene();\n            scene.background = new THREE.Color(0xF8F9FA);\n            camera = new THREE.PerspectiveCamera(1, rect.width / rect.height, 1, 1000);\n            controls = new OrbitControls(camera, container);\n\n            var axes = new THREE.AxesHelper(1);\n            axes.position.set(0, -0.25, 0);\n            scene.add(axes);\n\n            var gridHelper = new THREE.GridHelper(1, 5);\n            gridHelper.position.set(0, -0.25, 0);\n            scene.add(gridHelper);\n\n            var boxGeometry = new THREE.BoxGeometry(1, 1, 1);\n            var boxMaterial = new THREE.MeshNormalMaterial();\n            var boxMesh = new THREE.Mesh(boxGeometry, boxMaterial);\n            bb = new THREE.Box3().setFromObject(boxMesh);\n            var height = bb.getSize().y;\n            var dist = height / 2 / Math.tan(Math.PI * 1 / 360);\n            camera.position.set(dist + 25, dist + 25, dist + 25);\n            camera.lookAt(boxMesh.position);\n            camera.updateProjectionMatrix();\n\n            window.addEventListener('resize', onWindowResize, false);\n            document.getElementById(\"container\").addEventListener('mousedown', mousedownfunc, false);\n            document.getElementById(\"container\").addEventListener('mouseup', mouseupfunc, false);\n        }\n\n        function mousedownfunc() {\n            pause = true;\n        }\n\n        function mouseupfunc() {\n            pause = false;\n        }\n\n        function onWindowResize() {\n            camera.aspect = (rect.width) / (rect.height);\n            camera.updateProjectionMatrix();\n            renderer.setSize(rect.width - 2, rect.height - 2);\n        }\n\n        function animate() {\n            if (!pause) {\n                if (rotate === 'X') {\n                    mesh.rotation.x += 0.01;\n                }\n                else if (rotate === 'Y') {\n                    mesh.rotation.y += 0.01;\n                }\n                else if (rotate === 'Z') {\n                    mesh.rotation.z += 0.01;\n                }\n            }\n            requestAnimationFrame(animate);\n            renderer.render(scene, camera);\n        }\n    }\n\n    getSupportedFileString() {\n      return supportedFileExtensions.join(\", \")\n    }\n\n    //<-------------------------------------------------------------------------Copied from Material.js Component------------------------------------------------------------------------->\n    //Gets the materials and finishes from the API\n    getMats = () =>\n    {\n        axios.get(\"/api/mat\")\n        .then((mat) =>\n        {\n            var matNames = [];\n            mat.data.forEach(function(element){\n                materialObjects.push(element)\n                matNames.push(element.name)\n            });\n            this.setState({ materialsList: matNames })\n            this.setState({mats: mat.data})\n        })\n    }\n\n    handleChangeNext(value){\n        console.log('Sending')\n        //Maybe need to send?\n        //countryCode: this.state.countryCode, stateCode: this.state.stateCode, city: city, zipcode: zipcode, currency: currency\n    }\n\n    //Changes the finishes based on the material chosen\n    handleChangeMaterial(eventKey) {\n        var string = eventKey.toString();\n        var array = string.split(',');\n        var index = array[0];\n        var name = array[1];\n        var text = document.getElementById('but-material');\n        text.textContent = name;\n        this.setState({finishState: false});\n\n        materialzID = materialObjects[index].materialID;\n        finishesObjects = materialObjects[index].finishes\n\n        finishNames = [];\n        materialz = name;\n        var materialChosen = this.state.mats.find(isMaterial);\n        console.log(materialChosen)\n\n        materialChosen.finishes.forEach(function(element){\n            finishes.push(element)\n            finishNames.push(element.name);\n        });\n\n        this.setState({finishList: finishNames, finish: this.state.finishList[0]})\n        finishID = finishes[0].finishID;\n\n        this.updateMaterial(name, finishNames[0]);\n        document.getElementById('but-material').style.borderColor = \"#949494\";\n        document.getElementById('but-finish').style.borderColor = \"#949494\";\n    }\n\n    checkFinish() {\n        if (this.state.finishState) {\n            return \"Select\";\n        }\n        else {\n            return this.state.finishList[0];\n        }\n    }\n\n    handleChangeFinish(eventKey) {\n        var string = eventKey.toString();\n        var array = string.split(',');\n        var index = array[0];\n        var name = array[1];\n        var text = document.getElementById('but-finish');\n        text.textContent = name;\n\n        finishID = finishes[index].finishID;\n        this.setState({finish: name})\n        this.updateMaterial(materialz, name);\n        document.getElementById('but-finish').style.borderColor = \"#949494\";\n    }\n\n    onChangeFileUpload=event=>{\n        uploadedFile = event.target.files[0];\n    }\n\n    handleSubmit(event) {\n        if (materialzID && finishID && this.state.scale) {\n            var text = document.getElementById('priceText');\n            text.textContent = \"Calculating\";\n            document.getElementById('wave').style.display = '';\n            this.setState({cartState: false});\n            this.setState({error: ' '});\n            event.preventDefault();\n\n            const reactData = {\n                material: materialzID,\n                finish: finishID,\n                countryCode: this.state.countryCode,\n                stateCode: this.state.stateCode,\n                city: city,\n                zipcode: zipcode,\n                currency: currency,\n                scale: this.state.scale,\n                url: url\n            }\n\n            //Send the information to Price.server.controller\n            axios.post(\"/api/sendMat\", reactData)\n                .then((price) => //Get the price back from Price.server.controller\n                {\n                    console.log(price)\n                    this.setState({price: price.data.modelPrice})\n                    this.setState({token: price.data.token})\n                    if (this.state.price == '0') {\n                        this.setState({error: \"The dimensions of the model are too large or too small.\"})\n                        text.textContent = \"Error\";\n                        document.getElementById('wave').style.display = 'none';\n                    } else {\n                        this.setState({buttonDisabledState: false});\n                      text.textContent = \"Add to Cart for: $\" + price.data.modelPrice;\n                      document.getElementById('wave').style.display = 'none';\n                    }\n                })\n                .catch((err) => {\n                    text.textContent = \"Error: Please Refresh the Page!\";\n                    document.getElementById('wave').style.display = 'none';\n                    console.log('error', err)\n                })\n        }\n        else {\n            if (!materialzID) {\n                document.getElementById('but-material').style.borderColor = \"#e32c2b\";\n            }\n            if (!finishID) {\n                document.getElementById('but-finish').style.borderColor = \"#e32c2b\";\n            }\n            if (!this.state.scale) {\n                document.getElementById('but-scale').style.borderColor = \"#e32c2b\";\n            }\n        }\n    }\n\n    handleChangeScale(eventKey){\n        this.state.scale = eventKey/100;\n        var text = document.getElementById('but-scale');\n        text.textContent = eventKey + '%';\n\n        document.getElementById('but-scale').style.borderColor = \"#949494\";\n    }\n\n    render() {\n        const {link} = this.state;\n        if (link) {\n            const {currentFile} = this.state;\n            if (currentFile) {\n                return (\n                    <div>\n                        <Redirect to={{pathname: link, state: {modelPrice: this.state.price, token: this.state.token}}} />\n                    </div>\n                );\n            }\n            else {\n                this.setState({link: null});\n            }\n        }\n\n        const handleSubmit = event => {\n            const form = event.currentTarget;\n            if (form.checkValidity() === false) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }\n\n        return (\n            <div>\n                <div id=\"ui-title\"> Upload 3D CAD Files</div>\n                <div className=\"renderBody\" style={{ marginTop: \"35px\", display: \"flex\", justifyContent: 'center'}}>\n                    <div>\n                        <Dropzone onDrop={this.onDrop} noClick={this.state.fileRendered}>{({ getRootProps, getInputProps, isDragActive }) => (\n                            <div>\n                                <div id=\"infoAndInstruc\" style={{ position: \"absolute\", marginRight: \"70px\", borderStyle: \"solid\", display: 'flex', justifyContent: 'center', alignItems: 'center', height: \"700px\", width: \"700px\", backgroundColor: \"#F8F9FA\" }} {...getRootProps()}>\n                                    <input {...getInputProps()} />\n                                    <ul>\n                                        <li>\n                                            <div> <div><center><img src=\"upload.png\" alt=\"Drop Icon\" width=\"100\" height=\"100\"/></center></div> </div>\n                                        </li>\n                                        <li>\n                                            <div id=\"renderInstruc\">{isDragActive ? \"Drop it like it's hot!\" : 'Click me or drag a file to upload!'}</div>\n                                        </li>\n                                    </ul>\n                                </div>\n\n                                <div id=\"container\" style={{ postion: \"absolute\", marginRight: \"70px\", borderStyle: \"solid\", display: 'flex', justifyContent: 'center', alignItems: 'center', height: \"700px\", width: \"700px\", backgroundColor: \"#F8F9FA\" }} {...getRootProps()}>\n                                    <input {...getInputProps()} />\n                                </div>\n                            </div>\n                        )}\n                        </Dropzone>\n                    </div>\n\n                    <div style={{justifyContent: 'center', alignItems: 'center', height: \"700px\", width: \"500px\", backgroundColor: \"#FFFFFF\" }}>\n                        <div>\n                            <div id=\"ui-text\"><a data-tip data-for='upload'> Upload </a></div>\n                            <div id =\"ui-dropdown\">\n                                <ReactTooltip id='upload' type='warning' effect='solid' place={'right'}>\n                                    <span>supported files are {this.getSupportedFileString()}</span>\n                                </ReactTooltip>\n                                <input type=\"file\" ref=\"fileUploader\" onChange={this.getFile.bind(this)} style={{ display: 'none' }} />\n                                <Button id=\"but-upload\" type=\"file\" onClick={this.handleClick.bind(this)}>\n                                    Upload a file ({this.getSupportedFileString()})\n                                </Button>\n                                    <div id=\"ui-error-statement\"> {this.state.error} </div>\n                            </div>\n\n                            <ButtonGroup id =\"ui-dropdown\">\n                                <ul style={{ zIndex: 3}}>\n                                    <li>\n                                        <div id=\"ui-text\">Orientation</div>\n                                    </li>\n                                    <li>\n                                        <DropdownButton id=\"but-orientate\" title=\"Select\" onSelect={this.onOrientation}>\n                                            <div style={{ width: \"167px\" }}>\n                                                <Dropdown.Item eventKey=\"XYZ\">XYZ</Dropdown.Item>\n                                                <Dropdown.Item eventKey=\"XZY\">XZY</Dropdown.Item>\n                                                <Dropdown.Item eventKey=\"YXZ\">YXZ</Dropdown.Item>\n                                                <Dropdown.Item eventKey=\"YZX\">YZX</Dropdown.Item>\n                                                <Dropdown.Item eventKey=\"ZXY\">ZXY</Dropdown.Item>\n                                                <Dropdown.Item eventKey=\"ZYX\">ZYX</Dropdown.Item>\n                                            </div>\n                                        </DropdownButton>\n                                    </li>\n                                </ul>\n\n                                <ul style={{ zIndex: 1 }}>\n                                    <li>\n                                        <div id=\"ui-text\">Rotation</div>\n                                    </li>\n                                    <li>\n                                        <DropdownButton id=\"but-rotate\" title=\"Select\" onSelect={this.onRotation}>\n                                            <div style={{ width: \"166px\" }}>\n                                                <Dropdown.Item eventKey=\"X\">X</Dropdown.Item>\n                                                <Dropdown.Item eventKey=\"Y\">Y</Dropdown.Item>\n                                                <Dropdown.Item eventKey=\"Z\">Z</Dropdown.Item>\n                                            </div>\n                                        </DropdownButton>\n                                    </li>\n                                </ul>\n\n                                <ul style={{ zIndex: 2 }}>\n                                    <li>\n                                        <div id=\"ui-text\">Scale</div>\n                                    </li>\n                                    <li>\n                                        <DropdownButton id=\"but-scale\" title=\"Select\" onSelect={this.handleChangeScale}>\n                                            <div style={{ width: \"167px\" }}>\n                                                <Dropdown.Item eventKey=\"20\">20%</Dropdown.Item>\n                                                <Dropdown.Item eventKey=\"50\">50%</Dropdown.Item>\n                                                <Dropdown.Item eventKey=\"70\">70%</Dropdown.Item>\n                                                <Dropdown.Item eventKey=\"100\">100%</Dropdown.Item>\n                                            </div>\n                                        </DropdownButton>\n                                    </li>\n                                </ul>\n                            </ButtonGroup>\n\n                            <div id=\"ui-text\"><a data-tip data-for='drop-mat'>Material*</a>\n                                <ReactTooltip id='drop-mat' type='warning' effect='solid' place={'right'}>\n                                    <span>The renders are approximations of actual material finishes.</span>\n                                </ReactTooltip>\n                            </div>\n                            <DropdownButton id=\"but-material\" title=\"Select\" onSelect={this.handleChangeMaterial}>\n                                <div id=\"scroll\" style={{ width: \"500px\", overflowY: \"scroll\", maxHeight: \"315px\" }}>\n                                    {this.state.materialsList.map((x, y) => <Dropdown.Item style={{ textTransform: \"capitalize\" }} eventKey={[y, x]}>{x}</Dropdown.Item>)}\n                                </div>\n                            </DropdownButton>\n\n                            <div id=\"ui-text\">Finish</div>\n                            <DropdownButton disabled={this.state.finishState} id=\"but-finish\" title={this.checkFinish()} onSelect={this.handleChangeFinish}>\n                                <div id=\"scroll\" style={{ width: \"500px\", overflowY: \"scroll\", maxHeight: \"315px\" }}>\n                                    {this.state.finishList.map((x, y) => <Dropdown.Item style={{ textTransform: \"capitalize\" }} eventKey={[y, x]}>{x}</Dropdown.Item>)}\n                                </div>\n                            </DropdownButton>\n\n                            <ButtonGroup>\n                                <ul>\n                                    <Button id=\"ui-submit\" type=\"submit\" onClick={this.handleSubmit}> Get Quote </Button>\n                                </ul>\n\n                                <ul>\n                                    <Button onClick={this.routeChange} disabled={this.state.buttonDisabledState} id=\"ui-price\">\n                                        <ul style={{ display: 'flex', justifyContent: \"center\", alignItems: 'center' }}>\n                                            <li id=\"priceText\">\n                                                Add to Cart for: ${this.state.price}\n                                            </li>\n                                            <li>\n                                                <div id=\"wave\" style={{ display: \"none\" }}>\n                                                    <span className=\"dot\"></span>\n                                                    <span className=\"dot\"></span>\n                                                    <span className=\"dot\"></span>\n                                                </div>\n                                            </li>\n                                        </ul>\n\n                                    </Button>\n                                </ul>\n                            </ButtonGroup>\n                        </div>\n                    </div>\n                </div>\n                <div id=\"ui-footnote\">*The renders are approximations of actual material finishes.</div>\n            </div>\n        );\n    }\n}\n\nexport default ThreeScene;\n"]},"metadata":{},"sourceType":"module"}